<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <form>
      <div id= "box"></div>
      <label for="yourname">Your Name Here</label><br>
      <input type="text" id="yourname" value=""><br>
      <label for="year">Year of Birth</label><br>
      <input type="text" id="year" value=""><br>
      <button>submit</button>
    </form>
  </body>
  <script>
  const submit = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()
    
    
    const name = document.querySelector( '#yourname' ),
          year = document.querySelector( '#year'),
          json = { yourname: yourname.value , year: year.value, age: "" },
          body = JSON.stringify( json )
    
    console.log("Hello")

   
    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      // do something with the reponse 
       
      return response.json()
    })
    .then( function(json) {
      var html = "<table border='1|1'>";
      json.name = yourname.value;
      rows.push(json)
    for (var i = 0; i < rows.length; i++) {
        html+="<tr>";
        html+="<td>"+rows[i].name+"</td>";
        html+="<td>"+rows[i].year+"</td>";
        html+="<td>"+rows[i].age+"</td>";
        
        html+="</tr>";

    }
    html+="</table>";
    document.getElementById("box").innerHTML = html;
          console.log(json)
    })
    
    
    return false
  }

  window.onload = function() {
    console.log("Hello");
    const button = document.querySelector( 'button' )
    button.onclick = submit;
  }
  var rows = [{'name': 'Name', 'year': 'Year', age: 'Age'}, { 'name': 'Matt', 'year': 1998, 'age': 22 },
  { 'name': 'Jared', 'year': 1999, 'age': 21 },
  { 'name': 'Alec', 'year': 1998, 'age': 15}]
  </script>
</html>
